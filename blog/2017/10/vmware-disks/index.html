<!DOCTYPE HTML>

<html>
    <head>
        
            
                <title>Automated addition of VMware Disks and Controllers</title>
            
        

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.30-DEV" />
        
    
        
    

    

    <link rel="apple-touch-icon-precomposed"
        href='/favicon/apple-touch-icon-precomposed.png'>
    <link rel="icon" href='/favicon/favicon.png'>
    
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage"
        content='/favicon/mstile.png'>



        
            <meta name="author" content="Bradley Bishop">
        
        
            <meta name="description" content="Automated addition of VMware Disks and Controllers">
        

        <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Automated addition of VMware Disks and Controllers"/>
<meta name="twitter:description" content="Automated addition of VMware Disks and Controllers"/>
<meta name="twitter:site" content="@encoretechcincy"/>

        <meta property="og:title" content="Automated addition of VMware Disks and Controllers" />
<meta property="og:description" content="Automated addition of VMware Disks and Controllers" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://encoretechnologies.github.io/blog/2017/10/vmware-disks/" />



<meta property="article:published_time" content="2017-10-19T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2017-10-19T00:00:00&#43;00:00"/>











        
<meta itemprop="name" content="Automated addition of VMware Disks and Controllers">
<meta itemprop="description" content="Automated addition of VMware Disks and Controllers">


<meta itemprop="dateModified" content="2017-10-19T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1619">



<meta itemprop="keywords" content="" />

        

        
            
        

        
        
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,800,900|Source+Sans+Pro:400,700">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css" />
            <link rel="stylesheet" href="/css/main.css">
            <link rel="stylesheet" href="/css/add-on.css">
        

        

        
            
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-108206364-1', 'auto');
ga('send', 'pageview');
</script>

        
    </head>
    <body>

      
      <div id="wrapper">

    
    
<header id="header">
    
      
          <h1><a href="/">blog</a></h1>
      
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/">
                            <i class="fa fa-home">&nbsp;</i>Home
                    </a>
                </li>
            
                <li>
                    <a href="/blog/">
                            <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                    </a>
                </li>
            
                <li>
                    <a href="/categories/">
                            <i class="fa fa-sitemap">&nbsp;</i>Categories
                    </a>
                </li>
            
                <li>
                    <a href="/about/">
                            <i class="fa fa-id-card-o">&nbsp;</i>About
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li id="share-nav" class="share-menu" style="display:none;">
                <a class="fa-share-alt" href="#share-menu">Share</a>
            </li>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="as_sitesearch" value="https://encoretechnologies.github.io">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:https://encoretechnologies.github.io">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/">
                            <h3>
                                <i class="fa fa-home">&nbsp;</i>Home
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/">
                            <h3>
                                <i class="fa fa-newspaper-o">&nbsp;</i>Blog
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/categories/">
                            <h3>
                                <i class="fa fa-sitemap">&nbsp;</i>Categories
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/about/">
                            <h3>
                                <i class="fa fa-id-card-o">&nbsp;</i>About
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    
        <section>
            <ul class="links">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                
                    
                

                
                    <li>
                        <a href="https://encoretechnologies.github.io/blog/2018/03/stackstorm-changed-our-lives/"><p>How StackStorm Changed Our Lives</p></a>
                    </li>
                
                    <li>
                        <a href="https://encoretechnologies.github.io/blog/2017/10/stackstorm-inquiries/"><p>Implementing 2-Factor Auth For Workflows In StackStorm Using Inquiries</p></a>
                    </li>
                
            </ul>
        </section>

    
        
</section>

    <section id="share-menu">
    <section id="social-share-nav">
        <ul class="links">
            <header>
                <h3>Share this post <i class="fa fa-smile-o"></i></h3>
            </header>
            


<li><a href="//twitter.com/share?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&text=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers&via=encoretechcincy" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Bradley%20Bishop&body=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
</section>

    
    <div id="main">
        
        
        <article class="post">
    <header>
    <div class="title">
        
            <h1><a href="https://encoretechnologies.github.io/blog/2017/10/vmware-disks/">Automated addition of VMware Disks and Controllers</a></h1>
            
        
        
            <p>Automated addition of VMware Disks and Controllers</p>
        
    </div>
    <div class="meta">
        

        <time class="published"
            datetime='2017-10-19'>
            October 19, 2017</time>
        
        <span class="author"><a href="https://github.com/bishopbm1">Bradley Bishop</a></span>
        
        
            <p>8 minute read</p>
        
        
    </div>
</header>


    
    <section id="social-share">
        <ul class="icons">
            


<li><a href="//twitter.com/share?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&text=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers&via=encoretechcincy" target="_blank" class="share-btn twitter">
    <i class="fa fa-twitter"></i>
    <p>Twitter</p>
</a></li>


<li><a href="//plus.google.com/share?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn google-plus">
    <i class="fa fa-google-plus"></i>
    <p>Google+</p>
</a></li>


<li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn facebook">
    <i class="fa fa-facebook"></i>
    <p>Facebook</p>
</a></li>


<li><a href="//reddit.com/submit?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn reddit">
    <i class="fa fa-reddit-alien"></i>
    <p>Reddit</p>
</a></li>


<li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn linkedin">
    <i class="fa fa-linkedin"></i>
    <p>LinkedIn</p>
</a></li>


<li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f&title=Automated%20addition%20of%20VMware%20Disks%20and%20Controllers" target="_blank" class="share-btn stumbleupon">
    <i class="fa fa-stumbleupon"></i>
    <p>StumbleUpon</p>
</a></li>


<li><a href="mailto:?subject=Check out this post by Bradley%20Bishop&body=https%3a%2f%2fencoretechnologies.github.io%2fblog%2f2017%2f10%2fvmware-disks%2f" target="_blank" class="share-btn email">
    <i class="fa fa-envelope"></i>
    <p>Email</p>
</a></li>

        </ul>
    </section>
    

    

    <div id="content">
        

<p>When adding disks to VMware VM using Python we need to use the <a href="https://github.com/vmware/pyvmomi">pyVmomi</a> VMware SOAP API to communicate with vCenter. pyVmomi gives us a lot of very helpful features that take out a lot of the guess work in adding new disks to a VMware VM.</p>

<p>You can install pyVmomi from pip into a virtualenv like the following:</p>

<pre><code class="language-bash">virtualenv ~/vmware
source ~/vmware/bin/activate
pip install pyvmomi
</code></pre>

<h1 id="vmware-connection">VMware Connection</h1>

<p>pyVmomi makes it really easy to connect to the VMware vCenter environment to query information and perform all the necessary tasks needed.</p>

<p>Example of connecting to VMware vCenter unsecured:</p>

<pre><code class="language-python">from pyVim.connect import SmartConnect, Disconnect
import requests
import ssl

requests.packages.urllib3.disable_warnings()
context = ssl._create_unverified_context()

si = SmartConnect(host=&quot;test.dev&quot;,
                  port=443,
                  user=&quot;username&quot;,
                  pwd=&quot;password&quot;,
                  sslContext=context)

client = si.RetrieveContent()
</code></pre>

<h1 id="virtual-machine">Virtual Machine</h1>

<p>The client can then be used to perform many different tasks, such as querying for a VM. Once you retrieve a VM object you can get all the information about the VM as well as make changes to the VM. There are many different ways to query for a VM but since the VM names can be duplicated we will use the uuid.</p>

<p>Example of querying for a VMware VM using the client from above:</p>

<pre><code class="language-python">vm = client.searchIndex.FindByUuid(uuid=&quot;0000-1111-2222&quot;, vmSearch=True)
</code></pre>

<h1 id="vmware-disks">VMware Disks</h1>

<p>pyVmomi can generate a whole object for you. For a disk we can generate a disk object that has all the default keys that are needed and any values that can be autogenerated. With this we can set the parameters that we know that we want to change and let VMware auto-generate the rest for us. This takes out all of the guess work when creating new disks.</p>

<h2 id="blank-disk">Blank Disk</h2>

<p>You can generate a basic disk for a VM using the following code:</p>

<pre><code class="language-python">from pyVmomi import vim

disk = vim.vm.device.VirtualDisk()
disk.backing = vim.vm.device.VirtualDisk.FlatVer2BackingInfo()
print disk
</code></pre>

<p>This produces the following output:</p>

<pre><code class="language-python">(vim.vm.device.VirtualDisk) {
   dynamicType = &lt;unset&gt;,
   dynamicProperty = (vmodl.DynamicProperty) [],
   key = 0,
   deviceInfo = &lt;unset&gt;,
   backing = (vim.vm.device.VirtualDisk.FlatVer2BackingInfo) {
      dynamicType = &lt;unset&gt;,
      dynamicProperty = (vmodl.DynamicProperty) [],
      fileName = '',
      datastore = &lt;unset&gt;,
      backingObjectId = &lt;unset&gt;,
      diskMode = '',
      split = &lt;unset&gt;,
      writeThrough = &lt;unset&gt;,
      thinProvisioned = &lt;unset&gt;,
      eagerlyScrub = &lt;unset&gt;,
      uuid = &lt;unset&gt;,
      contentId = &lt;unset&gt;,
      changeId = &lt;unset&gt;,
      parent = &lt;unset&gt;,
      deltaDiskFormat = &lt;unset&gt;,
      digestEnabled = &lt;unset&gt;,
      deltaGrainSize = &lt;unset&gt;,
      deltaDiskFormatVariant = &lt;unset&gt;,
      sharing = &lt;unset&gt;,
      keyId = &lt;unset&gt;
   },
   connectable = &lt;unset&gt;,
   slotInfo = &lt;unset&gt;,
   controllerKey = &lt;unset&gt;,
   unitNumber = &lt;unset&gt;,
   capacityInKB = 0L,
   capacityInBytes = &lt;unset&gt;,
   shares = &lt;unset&gt;,
   storageIOAllocation = &lt;unset&gt;,
   diskObjectId = &lt;unset&gt;,
   vFlashCacheConfigInfo = &lt;unset&gt;,
   iofilter = (str) [],
   vDiskId = &lt;unset&gt;
}
</code></pre>

<p>This gives you all the available options that are needed to successfully create a new disk for a VM. Not all the information is required to be filled out, a lot of the information has the ability to be auto generated when the disk is added to a VMware VM. Some of the options need to be whole objects as well.</p>

<h2 id="example-disk">Example Disk</h2>

<p>Here is an example of basic information needed to create a VMware Disk:</p>

<pre><code class="language-python">from pyVmomi import vim

disk = vim.vm.device.VirtualDisk()
disk.backing = vim.vm.device.VirtualDisk.FlatVer2BackingInfo()
disk.backing.diskMode = &quot;persistent&quot;
disk.capacityInKB = 1024

# This needs to be the current controller on the VM.
disk.controllerKey = 1

# This must be a VMware datastore object
disk.backing.datastore = vim.Datastore(&quot;testname&quot;)

# This number is a unique number for the disk on the current controller
disk.unitNumber = 1
print disk
</code></pre>

<p>This produces the following output:</p>

<pre><code class="language-python">(vim.vm.device.VirtualDisk) {
   dynamicType = &lt;unset&gt;,
   dynamicProperty = (vmodl.DynamicProperty) [],
   key = 0,
   deviceInfo = &lt;unset&gt;,
   backing = (vim.vm.device.VirtualDisk.FlatVer2BackingInfo) {
      dynamicType = &lt;unset&gt;,
      dynamicProperty = (vmodl.DynamicProperty) [],
      fileName = '',
      datastore = 'vim.Datastore:datastore',
      backingObjectId = &lt;unset&gt;,
      diskMode = 'persistent',
      split = &lt;unset&gt;,
      writeThrough = &lt;unset&gt;,
      thinProvisioned = &lt;unset&gt;,
      eagerlyScrub = &lt;unset&gt;,
      uuid = &lt;unset&gt;,
      contentId = &lt;unset&gt;,
      changeId = &lt;unset&gt;,
      parent = &lt;unset&gt;,
      deltaDiskFormat = &lt;unset&gt;,
      digestEnabled = &lt;unset&gt;,
      deltaGrainSize = &lt;unset&gt;,
      deltaDiskFormatVariant = &lt;unset&gt;,
      sharing = &lt;unset&gt;,
      keyId = &lt;unset&gt;
   },
   connectable = &lt;unset&gt;,
   slotInfo = &lt;unset&gt;,
   controllerKey = 1,
   unitNumber = 1,
   capacityInKB = 1024,
   capacityInBytes = &lt;unset&gt;,
   shares = &lt;unset&gt;,
   storageIOAllocation = &lt;unset&gt;,
   diskObjectId = &lt;unset&gt;,
   vFlashCacheConfigInfo = &lt;unset&gt;,
   iofilter = (str) [],
   vDiskId = &lt;unset&gt;
}
</code></pre>

<p>Notes:</p>

<ul>
<li>The disk.backing.datstore needs to be a pyvmomi.vim.Datastore object for the disk to be added properly</li>
<li>The controller key can be found by querying for the current controller and getting the key.</li>
</ul>

<pre><code class="language-python">from pyVmomi import vim

# Using the vm object we found above we can query for the controllers.
# This was we can look at all the controllers and get the one we want from the array.
controllers = []
for device in self.vm.config.hardware.device:
    if (isinstance(device, vim.vm.device.VirtualSCSIController) or
            isinstance(device, vim.vm.device.ParaVirtualSCSIController)):
        controllers.append(device)
</code></pre>

<ul>
<li>There can be a max of 15 disks per controller.</li>
<li>The disk.unitNumber must in the range [0, 6] and [8, 15] 7 is reserved.</li>
<li>The disk.unitNumber must be unique with respect to all other disks on the controller (ex: there can only be on disk with disk.unitNumber == 5 on a controller).</li>
</ul>

<h1 id="vmware-controller">VMware Controller</h1>

<p>We also have a need to add a new controller to a VMware VM when the current controller is full. The process to add a controller is very similar to adding a disk thanks to pyVmomi.</p>

<h2 id="blank-controller">Blank Controller</h2>

<p>Example of a blank controller:</p>

<pre><code class="language-python">from pyVmomi import vim

controller = vim.vm.device.VirtualSCSIController()
print controller
</code></pre>

<p>This produces the following output:</p>

<pre><code class="language-python">(vim.vm.device.VirtualSCSIController) {
   dynamicType = &lt;unset&gt;,
   dynamicProperty = (vmodl.DynamicProperty) [],
   key = 0,
   deviceInfo = &lt;unset&gt;,
   backing = &lt;unset&gt;,
   connectable = &lt;unset&gt;,
   slotInfo = &lt;unset&gt;,
   controllerKey = &lt;unset&gt;,
   unitNumber = &lt;unset&gt;,
   busNumber = 0,
   device = (int) [],
   hotAddRemove = &lt;unset&gt;,
   sharedBus = &lt;unset&gt;,
   scsiCtlrUnitNumber = &lt;unset&gt;
}
</code></pre>

<p>This is very similar to the Disks configuration in that most of the options do not need to be filled out. Something to keep in mind is that while the busNumber is initialized at 0 this is already taken by the first controller on the VM. This busNumber can be 0 to 3 since there can only be 4 controllers per VM.</p>

<h2 id="example-controller">Example Controller</h2>

<p>Here is an example of a controller that has been filled in to be added.</p>

<pre><code class="language-python">from pyVmomi import vim

controller = vim.vm.device.VirtualSCSIController()
controller.sharedBus = 'noSharing'
controller.busNumber = 1
print controller
</code></pre>

<p>This produces the following output:</p>

<pre><code class="language-python">(vim.vm.device.VirtualSCSIController) {
   dynamicType = &lt;unset&gt;,
   dynamicProperty = (vmodl.DynamicProperty) [],
   key = 0,
   deviceInfo = &lt;unset&gt;,
   backing = &lt;unset&gt;,
   connectable = &lt;unset&gt;,
   slotInfo = &lt;unset&gt;,
   controllerKey = &lt;unset&gt;,
   unitNumber = &lt;unset&gt;,
   busNumber = 1,
   device = (int) [],
   hotAddRemove = &lt;unset&gt;,
   sharedBus = 'noSharing',
   scsiCtlrUnitNumber = &lt;unset&gt;
}
</code></pre>

<h1 id="reconfigure-vm-task">Reconfigure VM Task</h1>

<p>Once you have your configuration for the addition that you want to make to the VMware VM you need to generate a configuration specification to be passed into a reconfigure VM task to send to VMware. This accepts a list of configurationss that can be done at the same time if you wish. Keep in mind that if you need to generate a new controller to add a disk then that will need to be done before so that you can get auto generated information unless you specify it.</p>

<p>Example of how to add a disk using the VM object from above:</p>

<pre><code class="language-python">from pyVmomi import vim

# Generate basic Disk information
disk = vim.vm.device.VirtualDisk()
disk.backing = vim.vm.device.VirtualDisk.FlatVer2BackingInfo()
disk.backing.diskMode = &quot;persistent&quot;
disk.capacityInKB = 1024
disk.controllerKey = 1
disk.backing.datastore = vim.Datastore(&quot;datastore&quot;)
disk.unitNumber = 1

# Generate virtual device Specification
disk_spec = vim.vm.device.VirtualDeviceSpec()
disk_spec.fileOperation = &quot;create&quot;
disk_spec.operation = vim.vm.device.VirtualDeviceSpec.Operation.add

# Add disk to the device spec
disk_spec.device = disk

config_spec = vim.vm.ConfigSpec()
config_spec.deviceChange = [disk_spec]

# This submits the configspec and performs all the tasks contained
vm.ReconfigVM_Task(config_spec)
</code></pre>

<p>Config Spec output:</p>

<pre><code class="language-python">(vim.vm.ConfigSpec) {
   dynamicType = &lt;unset&gt;,
   dynamicProperty = (vmodl.DynamicProperty) [],
   changeVersion = &lt;unset&gt;,
   name = &lt;unset&gt;,
   version = &lt;unset&gt;,
   uuid = &lt;unset&gt;,
   instanceUuid = &lt;unset&gt;,
   npivNodeWorldWideName = (long) [],
   npivPortWorldWideName = (long) [],
   npivWorldWideNameType = &lt;unset&gt;,
   npivDesiredNodeWwns = &lt;unset&gt;,
   npivDesiredPortWwns = &lt;unset&gt;,
   npivTemporaryDisabled = &lt;unset&gt;,
   npivOnNonRdmDisks = &lt;unset&gt;,
   npivWorldWideNameOp = &lt;unset&gt;,
   locationId = &lt;unset&gt;,
   guestId = &lt;unset&gt;,
   alternateGuestName = &lt;unset&gt;,
   annotation = &lt;unset&gt;,
   files = &lt;unset&gt;,
   tools = &lt;unset&gt;,
   flags = &lt;unset&gt;,
   consolePreferences = &lt;unset&gt;,
   powerOpInfo = &lt;unset&gt;,
   numCPUs = &lt;unset&gt;,
   numCoresPerSocket = &lt;unset&gt;,
   memoryMB = &lt;unset&gt;,
   memoryHotAddEnabled = &lt;unset&gt;,
   cpuHotAddEnabled = &lt;unset&gt;,
   cpuHotRemoveEnabled = &lt;unset&gt;,
   virtualICH7MPresent = &lt;unset&gt;,
   virtualSMCPresent = &lt;unset&gt;,
   deviceChange = (vim.vm.device.VirtualDeviceSpec) [
      (vim.vm.device.VirtualDeviceSpec) {
         dynamicType = &lt;unset&gt;,
         dynamicProperty = (vmodl.DynamicProperty) [],
         operation = 'add',
         fileOperation = 'create',
         device = (vim.vm.device.VirtualDisk) {
            dynamicType = &lt;unset&gt;,
            dynamicProperty = (vmodl.DynamicProperty) [],
            key = 0,
            deviceInfo = &lt;unset&gt;,
            backing = (vim.vm.device.VirtualDisk.FlatVer2BackingInfo) {
               dynamicType = &lt;unset&gt;,
               dynamicProperty = (vmodl.DynamicProperty) [],
               fileName = '',
               datastore = 'vim.Datastore:datastore',
               backingObjectId = &lt;unset&gt;,
               diskMode = 'persistent',
               split = &lt;unset&gt;,
               writeThrough = &lt;unset&gt;,
               thinProvisioned = &lt;unset&gt;,
               eagerlyScrub = &lt;unset&gt;,
               uuid = &lt;unset&gt;,
               contentId = &lt;unset&gt;,
               changeId = &lt;unset&gt;,
               parent = &lt;unset&gt;,
               deltaDiskFormat = &lt;unset&gt;,
               digestEnabled = &lt;unset&gt;,
               deltaGrainSize = &lt;unset&gt;,
               deltaDiskFormatVariant = &lt;unset&gt;,
               sharing = &lt;unset&gt;,
               keyId = &lt;unset&gt;
            },
            connectable = &lt;unset&gt;,
            slotInfo = &lt;unset&gt;,
            controllerKey = 1,
            unitNumber = 1,
            capacityInKB = 1024,
            capacityInBytes = &lt;unset&gt;,
            shares = &lt;unset&gt;,
            storageIOAllocation = &lt;unset&gt;,
            diskObjectId = &lt;unset&gt;,
            vFlashCacheConfigInfo = &lt;unset&gt;,
            iofilter = (str) [],
            vDiskId = &lt;unset&gt;
         },
         profile = (vim.vm.ProfileSpec) [],
         backing = &lt;unset&gt;
      }
   ],
   cpuAllocation = &lt;unset&gt;,
   memoryAllocation = &lt;unset&gt;,
   latencySensitivity = &lt;unset&gt;,
   cpuAffinity = &lt;unset&gt;,
   memoryAffinity = &lt;unset&gt;,
   networkShaper = &lt;unset&gt;,
   cpuFeatureMask = (vim.vm.ConfigSpec.CpuIdInfoSpec) [],
   extraConfig = (vim.option.OptionValue) [],
   swapPlacement = &lt;unset&gt;,
   bootOptions = &lt;unset&gt;,
   vAppConfig = &lt;unset&gt;,
   ftInfo = &lt;unset&gt;,
   repConfig = &lt;unset&gt;,
   vAppConfigRemoved = &lt;unset&gt;,
   vAssertsEnabled = &lt;unset&gt;,
   changeTrackingEnabled = &lt;unset&gt;,
   firmware = &lt;unset&gt;,
   maxMksConnections = &lt;unset&gt;,
   guestAutoLockEnabled = &lt;unset&gt;,
   managedBy = &lt;unset&gt;,
   memoryReservationLockedToMax = &lt;unset&gt;,
   nestedHVEnabled = &lt;unset&gt;,
   vPMCEnabled = &lt;unset&gt;,
   scheduledHardwareUpgradeInfo = &lt;unset&gt;,
   vmProfile = (vim.vm.ProfileSpec) [],
   messageBusTunnelEnabled = &lt;unset&gt;,
   crypto = &lt;unset&gt;,
   migrateEncryption = &lt;unset&gt;
}
</code></pre>

<p>With this information, we can now effectively add many disks to a VM without worrying about running out of controller space since we can effectively add more controllers when needed.</p>

<p>-Bradley Bishop</p>

    </div>

    <footer>
        <ul class="stats">
    
        

        
        
            <li>
                
                
                    

                    

                    
                        <i class="fa fa-sitemap">&nbsp;</i>
                    

                    
                        Categories
                    
                
            </li>
        
    

    
    
        <li><a href='/categories/bradley-bishop'>Bradley Bishop</a></li>
    
        <li><a href='/categories/vmware'>VMware</a></li>
    
        <li><a href='/categories/pyvmomi'>pyVmomi</a></li>
    
        <li><a href='/categories/disks'>Disks</a></li>
    
        <li><a href='/categories/controllers'>Controllers</a></li>
    
        <li><a href='/categories/automation'>automation</a></li>
    
</ul>

    </footer>
</article>
<ul class="actions pagination">
    
        <li><a href="https://encoretechnologies.github.io/blog/2017/10/automated-creation-of-stackstorm-packs/"
                class="button big previous">Automated creation of StackStorm Packs</a></li>
    

    
        <li><a href="https://encoretechnologies.github.io/blog/2017/10/servicenow-automation/"
                class="button big next">Automated Editing and Addition of ServiceNow CIs</a></li>
    
</ul>



    
        <article class="post">
            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "shortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </article>
    



    </div>
    
<section id="sidebar">

    
        <section id="intro">
            
            
                
                    <img src="/img/main/encore_logo_small.png" width="" alt="Hugo Future Imperfect" />
                
            
            
                <header>
                    <h2>DevOps Blog</h2>
                    <p>Blog about everything DevOps, automation, virtualization and cloud</p>
                </header>
            
            <ul class="icons">
                
                
                    
<li><a href="http://encore.tech/" target="_blank" title="Website" class="fa fa-globe"></a></li>



<li><a href="//github.com/EncoreTechnologies" target="_blank" title="GitHub" class="fa fa-github"></a></li>



































<li><a href="//linkedin.com/company/encoretechnologies" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>













<li><a href="//facebook.com/EncoreTechnologies" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>



<li><a href="//twitter.com/encoretechcincy" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




                
            </ul>
        </section>

    
        <section id="recent-posts">
            <ul class="posts">
                <header>
                    <h3>Recent Posts</h3>
                </header>
                

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <h3><a href="https://encoretechnologies.github.io/blog/2018/03/stackstorm-changed-our-lives/">How StackStorm Changed Our Lives</a></h3>
                                
                                <time class="published" datetime=
                                    '2018-03-09'>
                                    March 9, 2018</time>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <h3><a href="https://encoretechnologies.github.io/blog/2017/10/stackstorm-inquiries/">Implementing 2-Factor Auth For Workflows In StackStorm Using Inquiries</a></h3>
                                
                                <time class="published" datetime=
                                    '2017-10-31'>
                                    October 31, 2017</time>
                            </header>
                        </article>
                    </li>
                

                
                    <li>
                        <ul class="actions">
                            <li><a href=
                            
                                /blog/
                            
                            class="button">View more posts</a></li>
                        </ul>
                    </li>
                
            </ul>
        </section>

    
    
    
    
        <section id="categories">
            <ul class="posts">
                <header>
                    <h3><a href="/categories/">Categories</a></h3>
                </header>

                
                    
                

                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/nick-maludy/">Nick Maludy</a>
                                <span style="float:right;">4</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/stackstorm/">StackStorm</a>
                                <span style="float:right;">3</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/encore/">Encore</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/automation/">automation</a>
                                <span style="float:right;">2</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/bradley-bishop/">Bradley Bishop</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/controllers/">Controllers</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/devops/">DevOps</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/disks/">Disks</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/john-schoewe/">John Schoewe</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/vmware/">VMware</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/duo/">duo</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/inquiries/">inquiries</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/life/">life</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/pack/">pack</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
                    <li>
                        <article>
                            <header>
                                <a href="/categories/pyvmomi/">pyVmomi</a>
                                <span style="float:right;">1</span>
                            </header>
                        </article>
                    </li>
                
            </ul>
        </section>
    

    
        
        <section class="blurb">
            <h2>About</h2>
            <p>Encore Technologies helps companies automate and accelerate their IT environments</p>

            <ul class="actions">
                <li><a href="/about/" class="button">Learn More</a></li>
            </ul>
        </section>
        

    
        <section id="footer">
            <ul class="icons">
                
                
                    
<li><a href="http://encore.tech/" target="_blank" title="Website" class="fa fa-globe"></a></li>



<li><a href="//github.com/EncoreTechnologies" target="_blank" title="GitHub" class="fa fa-github"></a></li>



































<li><a href="//linkedin.com/company/encoretechnologies" target="_blank" title="LinkedIn" class="fa fa-linkedin"></a></li>













<li><a href="//facebook.com/EncoreTechnologies" target="_blank" title="Facebook" class="fa fa-facebook"></a></li>



<li><a href="//twitter.com/encoretechcincy" target="_blank" title="Twitter" class="fa fa-twitter"></a></li>




                
            </ul>

            <p class="copyright">&copy; 2018 Encore Technologies - DevOps Blog. Powered by <a href="//gohugo.io" target="_blank">Hugo</a></p>
        </section>

</section>

      </div>
      <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
      

      
        
      

      
      
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/skel/3.0.1/skel.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>
        <script src="/js/util.js"></script>
        <script src="/js/main.js"></script>
        <script src="/js/backToTop.js"></script>
      

      

      
      <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>

